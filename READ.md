Topic: Session cookies for authentication
------

Learning Objective: 
-------------------
Learn how to use session cookies for authentication in node js. In our case we add the authentication to access something from a website.


What is it?
-----------
In Node.js, a session cookie is a temporary cookie that is generated by server and stored on the client-side (user's browser) to maintain state information about a user's session across multiple requests.


Task:
-----
O We first make a page where some data will present in the webpage.
O Now we will make sign up and sign in page
O To access the data user must have account and must be signed in
O You should build the app in such a way that when a user log in once, he can access the document without login from multiple tabs


Installation:
-------------
O express, mongoose, nodemon, ejs (SSR)
O uuid

    In Node.js, a UUID (Universally Unique Identifier) is a 128-bit number used to uniquely identify information. It's a standard format for generating unique strings that are highly unlikely to be duplicated, making them useful for identifying resources, records, or any other piece of data that needs a unique identifier.


O cookie-parser

    Cookie parser is a software library used in web development that helps to parse ( parsing means to analyze or break up something ) and extract cookie data from HTTP requests



Steps:
------
1. Make package.json and Install necessary packages 
2. Connect the mongodb server (connection.js, index.js)
3. Make home page and access with router (views\home.ejs, staticRouter.js, index.js)
4. sign up form

    > signup.ejs inside views
    > user models inside models
    > static router to access signup page directly from browser
    > user controller inside controllers
    > Define "/user" routes to handle signup form data
    > Add middleware to index.js to handle url parsing and signup form data

5. Log in form

    > login.ejs inside views
    > Define login router inside routes and controller
    > go to staticRouter and change the redirection of home page (when user search for home page, he/she will be redirected to login page)
    > Go to login.ejs and add sign up option
    
6. install uuid and cookie-parser
7. Generate session cookies

    > auth.js inside service folder
    > add this auth.js module inside user.js (signin) controllers

8. Use session cookie information to automatically login (if user login previously)

    > add getUser function to auth.js inside services
    > create a middleware auth.js inside middlewares and use the above getUser function inside this (create restrictToLoggedinUserOnly function in this case)
    > now use this middleware inside index.js

9. Install cookie-parser and use it inside index.js



Problems with stateful(session id based) authentication:
--------------------------------------------------------
>>> There is a big fault with this authentication. If for some reason server is restart or session id(state) within server will lost, all users will be logged out. To access features they must be log in again.

>>> This authentication is memory intensive i.e., it uses the server memory but our server has limited memory. We should use minimum server memory.

>>> To solve this problem we have stateless authetication.